define(["app-config"],function(a){"use strict";var b=function(a,b){var c,d=[{title:"navigation.contacts"},{title:"contact.accounts.title",event:"sulu.contacts.accounts.list"}],e=this.sandbox.translate("contact.accounts.title");c=this.sandbox.translate(a?a.translation:"contact.account.type.basic"),b?(d.push({title:c+" #"+this.options.id}),e=b):d.push({title:c}),this.sandbox.emit("sulu.header.set-title",e),this.sandbox.emit("sulu.header.set-breadcrumb",d)},c=function(a){var b;if(a||a.hasownProperty("tabs"))for(b in a.tabs)a.tabs[b]===!0&&this.sandbox.emit("husky.tabs.header.item.show",b)},d=function(b,c){var d,e,f,g,h,i=0,j=a.getSection("sulu-contact");if(!j||j.length>0||!j.hasOwnProperty("accountTypes"))return!1;h=j.accountTypes,b&&b.hasOwnProperty("id")&&b.hasOwnProperty("type")?(d=b.type,e="id"):c?(d=c,e="name"):(d=0,e="id");for(f in h)if(g=h[f],g[e]===d){i=g;break}return i},e=function(a,b){var c=[];return this.sandbox.util.each(a.convertableTo,function(a,d){this.sandbox.util.each(b,function(b,e){e.name===a&&d&&c.push({title:e.translation+".conversion",callback:function(){this.sandbox.emit("sulu.contacts.account.convert",e)}.bind(this)})}.bind(this))}.bind(this)),c},f=function(){var a=[],b={icon:"gear",iconSize:"large",group:"left",id:"options-button",position:30,items:[]};a.push({id:"save-button",icon:"floppy-o",iconSize:"large","class":"highlight",position:1,group:"left",disabled:!0,callback:function(){this.sandbox.emit("sulu.header.toolbar.save")}.bind(this)}),this.options.data.id&&(b.items=e.call(this,this.accountType,this.accountTypes)),b.items.push({title:this.sandbox.translate("toolbar.delete"),callback:function(){this.sandbox.emit("sulu.header.toolbar.delete")}.bind(this)}),a.push(b),this.sandbox.emit("sulu.header.set-toolbar",{data:a})};return{setHeader:function(e,g){this.accountTypes=a.getSection("sulu-contact").accountTypes,e=e.toJSON(),this.accountType=d.call(this,e,g),c.call(this,this.accountType),b.call(this,this.accountType,e.name),f.call(this),this.sandbox.emit("sulu.contacts.account.types",{accountType:this.accountType,accountTypes:this.accountTypes})},getAccountType:function(a,b){return d.call(this,a,b)},getAccountTypeIdByTypeName:function(a){return d.call(this,null,a).id}}});