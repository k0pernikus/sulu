<form id="contact-form">
    <input type="hidden" data-mapper-property="id"/>

    <div class="grid">

        {% block static %}

        {% endblock %}
        <hr class="divider"/>

        {% block emails %}
            <h2><%=translate('public.email')%></h2>

            <div class="grid-row" id="emails" data-mapper-property="emails" data-type="collection">
                <div class="grid-col-6 floating emails-item">
                    <input type="hidden" data-mapper-property="id" class="id-value"/>

                    <div class="grid-col-12 dropdown"
                         data-aura-component="dropdown@husky"
                         data-aura-data='{{ emailTypes|json_encode() }}'
                         data-aura-instance-name="type"
                         data-aura-trigger="label">
                        <label class="pull-left">
                            <span class="type-value"
                                  data-form="true"
                                  data-mapper-property="emailType"
                                  data-type="label"
                                  data-type-label="name"
                                  data-type-id="id"
                                  data-id="{{ defaultEmailType.id }}">
                               <%=translate('{{ defaultEmailType.name }}')%>
                            </span>
                            <span class="dropdown-toggle inline-block pointer"></span>
                        </label>

                        <div class="remove-email"><span class="icon-remove pull-right pointer"></span></div>
                    </div>

                    <input type="text" class="form-element email-value" data-type="email" data-mapper-property="email">
                </div>
            </div>

            <div class="grid-row">
                <div id="addEmail" data-target-id="emails">
                    <span class="icon-add"></span><span
                            class="control-label"><%=translate('contact.form.addEmail')%></span>
                </div>
            </div>
        {% endblock %}
        <hr class="divider"/>

        {% block phones %}
            <h2><%=translate('public.phone')%></h2>

            <div class="grid-row" id="phones" data-mapper-property="phones" data-type="collection">
                <div class="grid-col-6 floating phones-item">
                    <input type="hidden" data-mapper-property="id" class="id-value"/>

                    <div class="grid-col-12 dropdown"
                         data-aura-component="dropdown@husky"
                         data-aura-data='{{ phoneTypes|json_encode() }}'
                         data-aura-instance-name="type"
                         data-aura-trigger="label">
                        <label class="pull-left">
                            <span class="type-value"
                                  data-form="true"
                                  data-mapper-property="phoneType"
                                  data-type="label"
                                  data-type-label="name"
                                  data-type-id="id"
                                  data-id="{{ defaultPhoneType.id }}">
                                <%=translate('{{ defaultPhoneType.name }}')%>
                            </span>
                            <span class="dropdown-toggle inline-block pointer"></span>
                        </label>

                        <div class="remove-phone"><span class="icon-remove pull-right pointer"></span></div>
                    </div>

                    <input type="text" class="form-element phone-value" data-mapper-property="phone">
                </div>
            </div>

            <div class="grid-row">
                <div id="addPhone" data-target-id="phones">
                    <span class="icon-add"></span><span
                            class="control-label"><%=translate('contact.form.addPhone')%></span>
                </div>
            </div>
        {% endblock %}
        <hr class="divider"/>

        {% block addresses %}
            <div class="grid-row">
                <div class="grid-col-4"><h2><%=translate('public.address')%></h2></div>
                <div class="grid-col-8"></div>
            </div>


            <div id="addresses" data-mapper-property="addresses" data-type="collection">
                <div class="addresses-item m-bottom-10">
                    <input type="hidden" data-mapper-property="id" class="id-value"/>

                    <div class="grid-row">
                        <div class="m-bottom-10 pull-left">
                            <div class="grid-col-12 dropdown"
                                 data-aura-component="dropdown@husky"
                                 data-aura-data='{{ addressTypes|json_encode() }}'
                                 data-aura-instance-name="type"
                                 data-aura-trigger="label">
                                <label class="pull-left">
                                    <span class="type-value"
                                          data-form="true"
                                          data-mapper-property="addressType"
                                          data-type="label"
                                          data-type-label="name"
                                          data-type-id="id"
                                          data-id="{{ defaultAddressType.id }}">
                                        <%=translate('{{ defaultAddressType.name }}')%>
                                    </span>
                                    <span class="dropdown-toggle inline-block pointer"></span>
                                </label>
                            </div>
                        </div>
                        <div class="remove-address"><span class="icon-remove pull-right pointer"></span></div>
                    </div>
                    <div class="grid-row">
                        <div class="grid-col-6">
                            <label for="street0"><%=translate('contact.address.street')%></label>
                            <input id="street0" type="text" class="form-element street-value"
                                   data-mapper-property="street"/>
                        </div>
                        <div class="grid-col-2">
                            <label for="number0"><%=translate('contact.address.number')%></label>
                            <input id="number0" type="text" class="form-element number-value"
                                   data-mapper-property="number"/>
                        </div>
                        <div class="grid-col-4">
                            <label for="addition0"><%=translate('contact.address.additional')%></label>
                            <input id="addition0" type="text" class="form-element addition-value"
                                   data-mapper-property="addition"/>
                        </div>
                    </div>
                    <div class="grid-row">
                        <div class="grid-col-2">
                            <label for="zip0"><%=translate('contact.address.zip')%></label>
                            <input id="zip0" type="text" class="form-element zip-value"
                                   data-mapper-property="zip"/>
                        </div>
                        <div class="grid-col-4">
                            <label for="city0"><%=translate('contact.address.city')%></label>
                            <input id="city0" type="text" class="form-element city-value"
                                   data-mapper-property="city"/>
                        </div>
                        <div class="grid-col-2">
                            <label for="state0"><%=translate('contact.address.state')%></label>
                            <input id="state0" type="text" class="form-element state-value"
                                   data-mapper-property="state"/>
                        </div>
                        <div class="grid-col-4">
                            <label for="country0"><%=translate('contact.address.country')%></label>

                            <select id="country0" class="country-value form-element" data-mapper-property="country" data-type="select">
                                {% for country in countries %}
                                    <option value="{{ country.id }}"><%=translate('{{ country.name }}')%></option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            <div class="grid-row m-bottom-20">
                <div id="addAddress" data-target-id="addresses">
                    <span class="icon-add"></span><span class="control-label"><%=translate('contact.form.addAddress')%></span>
                </div>
            </div>
        {% endblock %}
    </div>

</form>

{% block dialog %}
    <div id="dialog"></div>
{% endblock %}

{% block data %}
    <script type="text/javascript">
        (function() {
            var defaults = {
                emailType: {
                    'id': {{ defaultEmailType.id }},
                    'name': '{{ defaultEmailType.name }}'
                },
                phoneType: {
                    'id': {{ defaultPhoneType.id }},
                    'name': '{{ defaultPhoneType.name }}'
                },
                addressType: {
                    'id': {{ defaultAddressType.id }},
                    'name': '{{ defaultAddressType.name }}'
                },
                urlType: {
                    'id': {{ defaultUrlType.id }},
                    'name': '{{ defaultUrlType.name }}'
                },
                country: {
                    'id': {{ defaultCountry.id }},
                    'name': '{{ defaultCountry.name }}'
                }
            };

            App.emit('sulu.contacts.set-defaults', defaults);
        })();
    </script>
{% endblock %}
