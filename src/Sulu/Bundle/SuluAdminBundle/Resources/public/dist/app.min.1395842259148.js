define("app-config",[],function(){var e=JSON.parse(JSON.stringify(SULU));return{getUser:function(){return e.user},getSection:function(t){return e.sections[t]?e.sections[t]:null},getDebug:function(){return e.debug}}}),require.config({paths:{"app-config":"components/app-config/main",cultures:"vendor/globalize/cultures",husky:"vendor/husky/husky","aura_extensions/backbone-relational":"aura_extensions/backbone-relational","aura_extensions/sulu-content-tabs":"aura_extensions/sulu-content-tabs","aura_extensions/sulu-extension":"aura_extensions/sulu-extension","aura_extensions/sulu-view":"aura_extensions/sulu-view","__component__$app@suluadmin":"components/app/main","__component__$content@suluadmin":"components/content/main","__component__$dialog@suluadmin":"components/dialog/main","__component__$edit-toolbar@suluadmin":"components/edit-toolbar/main","__component__$list-toolbar@suluadmin":"components/list-toolbar/main","__component__$labels@suluadmin":"components/labels/main"},include:["app-config","aura_extensions/backbone-relational","aura_extensions/sulu-content-tabs","aura_extensions/sulu-extension","aura_extensions/sulu-view","__component__$app@suluadmin","__component__$app@suluadmin","__component__$content@suluadmin","__component__$dialog@suluadmin","__component__$edit-toolbar@suluadmin","__component__$list-toolbar@suluadmin","__component__$labels@suluadmin"],exclude:["husky"]}),require(["husky","app-config"],function(e,t){var n=t.getUser().locale,r;require(["text!/admin/bundles","text!/js/translations/sulu."+n+".json"],function(i,s){var o=JSON.parse(i),u=JSON.parse(s);r=new e({debug:{enable:t.getDebug()},culture:{name:n,messages:u}}),o.forEach(function(e){r.use("/bundles/"+e+"/dist/main.js")}.bind(this)),r.use("aura_extensions/backbone-relational"),r.use("aura_extensions/sulu-content-tabs"),r.use("aura_extensions/sulu-extension"),r.use("aura_extensions/sulu-view"),r.components.addSource("suluadmin","/bundles/suluadmin/js/components"),r.use(function(e){window.App=e.sandboxes.create("app-sandbox")}),r.start()})}),define("main",function(){}),function(e){var t,n,r;typeof window=="undefined"?(t=require("underscore"),n=require("backbone"),r=n,typeof module=="undefined"||(module.exports=r)):(t=window._,n=window.Backbone,r=window),n.Relational={showWarnings:!0},n.Semaphore={_permitsAvailable:null,_permitsUsed:0,acquire:function(){if(this._permitsAvailable&&this._permitsUsed>=this._permitsAvailable)throw new Error("Max permits acquired");this._permitsUsed++},release:function(){if(this._permitsUsed===0)throw new Error("All permits released");this._permitsUsed--},isLocked:function(){return this._permitsUsed>0},setAvailablePermits:function(e){if(this._permitsUsed>e)throw new Error("Available permits cannot be less than used permits");this._permitsAvailable=e}},n.BlockingQueue=function(){this._queue=[]},t.extend(n.BlockingQueue.prototype,n.Semaphore,{_queue:null,add:function(e){this.isBlocked()?this._queue.push(e):e()},process:function(){var e=this._queue;this._queue=[];while(e&&e.length)e.shift()()},block:function(){this.acquire()},unblock:function(){this.release(),this.isBlocked()||this.process()},isBlocked:function(){return this.isLocked()}}),n.Relational.eventQueue=new n.BlockingQueue,n.Store=function(){this._collections=[],this._reverseRelations=[],this._orphanRelations=[],this._subModels=[],this._modelScopes=[r]},t.extend(n.Store.prototype,n.Events,{initializeRelation:function(e,r,i){var s=t.isString(r.type)?n[r.type]||this.getObjectByName(r.type):r.type;s&&s.prototype instanceof n.Relation?new s(e,r,i):n.Relational.showWarnings&&typeof console!="undefined"&&console.warn("Relation=%o; missing or invalid relation type!",r)},addModelScope:function(e){this._modelScopes.push(e)},removeModelScope:function(e){this._modelScopes=t.without(this._modelScopes,e)},addSubModels:function(e,t){this._subModels.push({superModelType:t,subModels:e})},setupSuperModel:function(e){t.find(this._subModels,function(n){return t.find(n.subModels||[],function(t,r){var i=this.getObjectByName(t);if(e===i)return n.superModelType._subModels[r]=e,e._superModel=n.superModelType,e._subModelTypeValue=r,e._subModelTypeAttribute=n.superModelType.prototype.subModelTypeAttribute,!0},this)},this)},addReverseRelation:function(e){var n=t.any(this._reverseRelations,function(n){return t.all(e||[],function(e,t){return e===n[t]})});!n&&e.model&&e.type&&(this._reverseRelations.push(e),this._addRelation(e.model,e),this.retroFitRelation(e))},addOrphanRelation:function(e){var n=t.any(this._orphanRelations,function(n){return t.all(e||[],function(e,t){return e===n[t]})});!n&&e.model&&e.type&&this._orphanRelations.push(e)},processOrphanRelations:function(){t.each(this._orphanRelations.slice(0),function(e){var r=n.Relational.store.getObjectByName(e.relatedModel);r&&(this.initializeRelation(null,e),this._orphanRelations=t.without(this._orphanRelations,e))},this)},_addRelation:function(e,n){e.prototype.relations||(e.prototype.relations=[]),e.prototype.relations.push(n),t.each(e._subModels||[],function(e){this._addRelation(e,n)},this)},retroFitRelation:function(e){var t=this.getCollection(e.model,!1);t&&t.each(function(t){if(!(t instanceof e.model))return;new e.type(t,e)},this)},getCollection:function(e,r){e instanceof n.RelationalModel&&(e=e.constructor);var i=e;while(i._superModel)i=i._superModel;var s=t.find(this._collections,function(e){return e.model===i});return!s&&r!==!1&&(s=this._createCollection(i)),s},getObjectByName:function(n){var r=n.split("."),i=null;return t.find(this._modelScopes,function(n){i=t.reduce(r||[],function(t,n){return t?t[n]:e},n);if(i&&i!==n)return!0},this),i},_createCollection:function(e){var t;return e instanceof n.RelationalModel&&(e=e.constructor),e.prototype instanceof n.RelationalModel&&(t=new n.Collection,t.model=e,this._collections.push(t)),t},resolveIdForItem:function(e,r){var i=t.isString(r)||t.isNumber(r)?r:null;return i===null&&(r instanceof n.RelationalModel?i=r.id:t.isObject(r)&&(i=r[e.prototype.idAttribute])),!i&&i!==0&&(i=null),i},find:function(e,t){var n=this.resolveIdForItem(e,t),r=this.getCollection(e);if(r){var i=r.get(n);if(i instanceof e)return i}return null},register:function(e){var t=this.getCollection(e);if(t){var n=e.collection;t.add(e),this.listenTo(e,"destroy",this.unregister,this),this.listenTo(e,"relational:unregister",this.unregister,this),e.collection=n}},checkId:function(e,t){var r=this.getCollection(e),i=r&&r.get(t);if(i&&e!==i)throw n.Relational.showWarnings&&typeof console!="undefined"&&console.warn("Duplicate id! Old RelationalModel=%o, new RelationalModel=%o",i,e),new Error("Cannot instantiate more than one Backbone.RelationalModel with the same id per type!")},update:function(e){var t=this.getCollection(e);t._onModelEvent("change:"+e.idAttribute,e,t),e.trigger("relational:change:id",e,t)},unregister:function(e,n,r){this.stopListening(e),t.each(e.getRelations(),function(e){e.stopListening()});var i=this.getCollection(e);i&&i.remove(e,r)},reset:function(){this.stopListening(),this._collections=[],this._subModels=[],this._modelScopes=[r]}}),n.Relational.store=new n.Store,n.Relation=function(e,r,i){this.instance=e,r=t.isObject(r)?r:{},this.reverseRelation=t.defaults(r.reverseRelation||{},this.options.reverseRelation),this.options=t.defaults(r,this.options,n.Relation.prototype.options),this.reverseRelation.type=t.isString(this.reverseRelation.type)?n[this.reverseRelation.type]||n.Relational.store.getObjectByName(this.reverseRelation.type):this.reverseRelation.type,this.key=this.options.key,this.keySource=this.options.keySource||this.key,this.keyDestination=this.options.keyDestination||this.keySource||this.key,this.model=this.options.model||this.instance.constructor,this.relatedModel=this.options.relatedModel,t.isFunction(this.relatedModel)&&!(this.relatedModel.prototype instanceof n.RelationalModel)&&(this.relatedModel=t.result(this,"relatedModel")),t.isString(this.relatedModel)&&(this.relatedModel=n.Relational.store.getObjectByName(this.relatedModel));if(!this.checkPreconditions())return;!this.options.isAutoRelation&&this.reverseRelation.type&&this.reverseRelation.key&&n.Relational.store.addReverseRelation(t.defaults({isAutoRelation:!0,model:this.relatedModel,relatedModel:this.model,reverseRelation:this.options},this.reverseRelation));if(e){var s=this.keySource;s!==this.key&&typeof this.instance.get(this.key)=="object"&&(s=this.key),this.setKeyContents(this.instance.get(s)),this.relatedCollection=n.Relational.store.getCollection(this.relatedModel),this.keySource!==this.key&&delete this.instance.attributes[this.keySource],this.instance._relations[this.key]=this,this.initialize(i),this.options.autoFetch&&this.instance.fetchRelated(this.key,t.isObject(this.options.autoFetch)?this.options.autoFetch:{}),this.listenTo(this.instance,"destroy",this.destroy).listenTo(this.relatedCollection,"relational:add relational:change:id",this.tryAddRelated).listenTo(this.relatedCollection,"relational:remove",this.removeRelated)}},n.Relation.extend=n.Model.extend,t.extend(n.Relation.prototype,n.Events,n.Semaphore,{options:{createModels:!0,includeInJSON:!0,isAutoRelation:!1,autoFetch:!1,parse:!1},instance:null,key:null,keyContents:null,relatedModel:null,relatedCollection:null,reverseRelation:null,related:null,checkPreconditions:function(){var e=this.instance,r=this.key,i=this.model,s=this.relatedModel,o=n.Relational.showWarnings&&typeof console!="undefined";if(!i||!r||!s)return o&&console.warn("Relation=%o: missing model, key or relatedModel (%o, %o, %o).",this,i,r,s),!1;if(i.prototype instanceof n.RelationalModel){if(s.prototype instanceof n.RelationalModel){if(this instanceof n.HasMany&&this.reverseRelation.type===n.HasMany)return o&&console.warn("Relation=%o: relation is a HasMany, and the reverseRelation is HasMany as well.",this),!1;if(e&&t.keys(e._relations).length){var u=t.find(e._relations,function(e){return e.key===r},this);if(u)return o&&console.warn("Cannot create relation=%o on %o for model=%o: already taken by relation=%o.",this,r,e,u),!1}return!0}return o&&console.warn("Relation=%o: relatedModel does not inherit from Backbone.RelationalModel (%o).",this,s),!1}return o&&console.warn("Relation=%o: model does not inherit from Backbone.RelationalModel (%o).",this,e),!1},setRelated:function(e){this.related=e,this.instance.acquire(),this.instance.attributes[this.key]=e,this.instance.release()},_isReverseRelation:function(e){return e.instance instanceof this.relatedModel&&this.reverseRelation.key===e.key&&this.key===e.reverseRelation.key},getReverseRelations:function(e){var n=[],r=t.isUndefined(e)?this.related&&(this.related.models||[this.related]):[e];return t.each(r||[],function(e){t.each(e.getRelations()||[],function(e){this._isReverseRelation(e)&&n.push(e)},this)},this),n},destroy:function(){this.stopListening(),this instanceof n.HasOne?this.setRelated(null):this instanceof n.HasMany&&this.setRelated(this._prepareCollection()),t.each(this.getReverseRelations(),function(e){e.removeRelated(this.instance)},this)}}),n.HasOne=n.Relation.extend({options:{reverseRelation:{type:"HasMany"}},initialize:function(e){this.listenTo(this.instance,"relational:change:"+this.key,this.onChange);var n=this.findRelated(e);this.setRelated(n),t.each(this.getReverseRelations(),function(t){t.addRelated(this.instance,e)},this)},findRelated:function(e){var n=null;e=t.defaults({parse:this.options.parse},e);if(this.keyContents instanceof this.relatedModel)n=this.keyContents;else if(this.keyContents||this.keyContents===0){var r=t.defaults({create:this.options.createModels},e);n=this.relatedModel.findOrCreate(this.keyContents,r)}return n&&(this.keyId=null),n},setKeyContents:function(e){this.keyContents=e,this.keyId=n.Relational.store.resolveIdForItem(this.relatedModel,this.keyContents)},onChange:function(e,r,i){if(this.isLocked())return;this.acquire(),i=i?t.clone(i):{};var s=t.isUndefined(i.__related),o=s?this.related:i.__related;if(s){this.setKeyContents(r);var u=this.findRelated(i);this.setRelated(u)}o&&this.related!==o&&t.each(this.getReverseRelations(o),function(e){e.removeRelated(this.instance,null,i)},this),t.each(this.getReverseRelations(),function(e){e.addRelated(this.instance,i)},this);if(!i.silent&&this.related!==o){var a=this;this.changed=!0,n.Relational.eventQueue.add(function(){a.instance.trigger("change:"+a.key,a.instance,a.related,i,!0),a.changed=!1})}this.release()},tryAddRelated:function(e,t,n){(this.keyId||this.keyId===0)&&e.id===this.keyId&&(this.addRelated(e,n),this.keyId=null)},addRelated:function(e,n){var r=this;e.queue(function(){if(e!==r.related){var i=r.related||null;r.setRelated(e),r.onChange(r.instance,e,t.defaults({__related:i},n))}})},removeRelated:function(e,n,r){if(!this.related)return;if(e===this.related){var i=this.related||null;this.setRelated(null),this.onChange(this.instance,e,t.defaults({__related:i},r))}}}),n.HasMany=n.Relation.extend({collectionType:null,options:{reverseRelation:{type:"HasOne"},collectionType:n.Collection,collectionKey:!0,collectionOptions:{}},initialize:function(e){this.listenTo(this.instance,"relational:change:"+this.key,this.onChange),this.collectionType=this.options.collectionType,t.isFunction(this.collectionType)&&this.collectionType!==n.Collection&&!(this.collectionType.prototype instanceof n.Collection)&&(this.collectionType=t.result(this,"collectionType")),t.isString(this.collectionType)&&(this.collectionType=n.Relational.store.getObjectByName(this.collectionType));if(!(this.collectionType===n.Collection||this.collectionType.prototype instanceof n.Collection))throw new Error("`collectionType` must inherit from Backbone.Collection");var r=this.findRelated(e);this.setRelated(r)},_prepareCollection:function(e){this.related&&this.stopListening(this.related);if(!e||!(e instanceof n.Collection)){var r=t.isFunction(this.options.collectionOptions)?this.options.collectionOptions(this.instance):this.options.collectionOptions;e=new this.collectionType(null,r)}e.model=this.relatedModel;if(this.options.collectionKey){var i=this.options.collectionKey===!0?this.options.reverseRelation.key:this.options.collectionKey;e[i]&&e[i]!==this.instance?n.Relational.showWarnings&&typeof console!="undefined"&&console.warn("Relation=%o; collectionKey=%s already exists on collection=%o",this,i,this.options.collectionKey):i&&(e[i]=this.instance)}return this.listenTo(e,"relational:add",this.handleAddition).listenTo(e,"relational:remove",this.handleRemoval).listenTo(e,"relational:reset",this.handleReset),e},findRelated:function(e){var r=null;e=t.defaults({parse:this.options.parse},e);if(this.keyContents instanceof n.Collection)this._prepareCollection(this.keyContents),r=this.keyContents;else{var i=[];t.each(this.keyContents,function(n){if(n instanceof this.relatedModel)var r=n;else r=this.relatedModel.findOrCreate(n,t.extend({merge:!0},e,{create:this.options.createModels}));r&&i.push(r)},this),this.related instanceof n.Collection?r=this.related:r=this._prepareCollection(),r.set(i,t.defaults({merge:!1,parse:!1},e))}return this.keyIds=t.difference(this.keyIds,t.pluck(r.models,"id")),r},setKeyContents:function(e){this.keyContents=e instanceof n.Collection?e:null,this.keyIds=[],!this.keyContents&&(e||e===0)&&(this.keyContents=t.isArray(e)?e:[e],t.each(this.keyContents,function(e){var t=n.Relational.store.resolveIdForItem(this.relatedModel,e);(t||t===0)&&this.keyIds.push(t)},this))},onChange:function(e,r,i){i=i?t.clone(i):{},this.setKeyContents(r),this.changed=!1;var s=this.findRelated(i);this.setRelated(s);if(!i.silent){var o=this;n.Relational.eventQueue.add(function(){o.changed&&(o.instance.trigger("change:"+o.key,o.instance,o.related,i,!0),o.changed=!1)})}},handleAddition:function(e,r,i){i=i?t.clone(i):{},this.changed=!0,t.each(this.getReverseRelations(e),function(e){e.addRelated(this.instance,i)},this);var s=this;!i.silent&&n.Relational.eventQueue.add(function(){s.instance.trigger("add:"+s.key,e,s.related,i)})},handleRemoval:function(e,r,i){i=i?t.clone(i):{},this.changed=!0,t.each(this.getReverseRelations(e),function(e){e.removeRelated(this.instance,null,i)},this);var s=this;!i.silent&&n.Relational.eventQueue.add(function(){s.instance.trigger("remove:"+s.key,e,s.related,i)})},handleReset:function(e,r){var i=this;r=r?t.clone(r):{},!r.silent&&n.Relational.eventQueue.add(function(){i.instance.trigger("reset:"+i.key,i.related,r)})},tryAddRelated:function(e,n,r){var i=t.contains(this.keyIds,e.id);i&&(this.addRelated(e,r),this.keyIds=t.without(this.keyIds,e.id))},addRelated:function(e,n){var r=this;e.queue(function(){r.related&&!r.related.get(e)&&r.related.add(e,t.defaults({parse:!1},n))})},removeRelated:function(e,t,n){this.related.get(e)&&this.related.remove(e,n)}}),n.RelationalModel=n.Model.extend({relations:null,_relations:null,_isInitialized:!1,_deferProcessing:!1,_queue:null,_attributeChangeFired:!1,subModelTypeAttribute:"type",subModelTypes:null,constructor:function(e,r){if(r&&r.collection){var i=this,s=this.collection=r.collection;delete r.collection,this._deferProcessing=!0;var o=function(e){e===i&&(i._deferProcessing=!1,i.processQueue(),s.off("relational:add",o))};s.on("relational:add",o),t.defer(function(){o(i)})}n.Relational.store.processOrphanRelations(),this._queue=new n.BlockingQueue,this._queue.block(),n.Relational.eventQueue.block();try{n.Model.apply(this,arguments)}finally{n.Relational.eventQueue.unblock()}},trigger:function(e){if(e.length>5&&e.indexOf("change")===0){var t=this,r=arguments;n.Relational.eventQueue.add(function(){if(!t._isInitialized)return;var i=!0;if(e==="change")i=t.hasChanged()||t._attributeChangeFired,t._attributeChangeFired=!1;else{var s=e.slice(7),o=t.getRelation(s);o?(i=r[4]===!0,i?t.changed[s]=r[2]:o.changed||delete t.changed[s]):i&&(t._attributeChangeFired=!0)}i&&n.Model.prototype.trigger.apply(t,r)})}else n.Model.prototype.trigger.apply(this,arguments);return this},initializeRelations:function(e){this.acquire(),this._relations={},t.each(this.relations||[],function(t){n.Relational.store.initializeRelation(this,t,e)},this),this._isInitialized=!0,this.release(),this.processQueue()},updateRelations:function(e,n){this._isInitialized&&!this.isLocked()&&t.each(this._relations,function(t){if(!e||t.keySource in e||t.key in e){var r=this.attributes[t.keySource]||this.attributes[t.key],i=e&&(e[t.keySource]||e[t.key]);(t.related!==r||r===null&&i===null)&&this.trigger("relational:change:"+t.key,this,r,n||{})}t.keySource!==t.key&&delete this.attributes[t.keySource]},this)},queue:function(e){this._queue.add(e)},processQueue:function(){this._isInitialized&&!this._deferProcessing&&this._queue.isBlocked()&&this._queue.unblock()},getRelation:function(e){return this._relations[e]},getRelations:function(){return t.values(this._relations)},fetchRelated:function(e,r,i){r=t.extend({update:!0,remove:!1},r);var s,o,u=[],a=this.getRelation(e),f=a&&(a.keyIds&&a.keyIds.slice(0)||(a.keyId||a.keyId===0?[a.keyId]:[]));i&&(s=a.related instanceof n.Collection?a.related.models:[a.related],t.each(s,function(e){(e.id||e.id===0)&&f.push(e.id)}));if(f&&f.length){var l=[];s=t.map(f,function(e){var t=a.relatedModel.findModel(e);if(!t){var n={};n[a.relatedModel.prototype.idAttribute]=e,t=a.relatedModel.findOrCreate(n,r),l.push(t)}return t},this),a.related instanceof n.Collection&&t.isFunction(a.related.url)&&(o=a.related.url(s));if(o&&o!==a.related.url()){var c=t.defaults({error:function(){var e=arguments;t.each(l,function(t){t.trigger("destroy",t,t.collection,r),r.error&&r.error.apply(t,e)})},url:o},r);u=[a.related.fetch(c)]}else u=t.map(s,function(e){var n=t.defaults({error:function(){t.contains(l,e)&&(e.trigger("destroy",e,e.collection,r),r.error&&r.error.apply(e,arguments))}},r);return e.fetch(n)},this)}return u},get:function(r){var i=n.Model.prototype.get.call(this,r);if(!this.dotNotation||r.indexOf(".")===-1)return i;var s=r.split("."),o=t.reduce(s,function(r,i){if(t.isNull(r)||t.isUndefined(r))return e;if(r instanceof n.Model)return n.Model.prototype.get.call(r,i);if(r instanceof n.Collection)return n.Collection.prototype.at.call(r,i);throw new Error("Attribute must be an instanceof Backbone.Model or Backbone.Collection. Is: "+r+", currentSplit: "+i)},this);if(i!==e&&o!==e)throw new Error("Ambiguous result for '"+r+"'. direct result: "+i+", dotNotation: "+o);return i||o},set:function(e,r,i){n.Relational.eventQueue.block();var s;t.isObject(e)||e==null?(s=e,i=r):(s={},s[e]=r);try{var o=this.id,u=s&&this.idAttribute in s&&s[this.idAttribute];n.Relational.store.checkId(this,u);var a=n.Model.prototype.set.apply(this,arguments);!this._isInitialized&&!this.isLocked()?(this.constructor.initializeModelHierarchy(),n.Relational.store.register(this),this.initializeRelations(i)):u&&u!==o&&n.Relational.store.update(this),s&&this.updateRelations(s,i)}finally{n.Relational.eventQueue.unblock()}return a},clone:function(){var e=t.clone(this.attributes);return t.isUndefined(e[this.idAttribute])||(e[this.idAttribute]=null),t.each(this.getRelations(),function(t){delete e[t.key]}),new this.constructor(e)},toJSON:function(e){if(this.isLocked())return this.id;this.acquire();var r=n.Model.prototype.toJSON.call(this,e);return this.constructor._superModel&&!(this.constructor._subModelTypeAttribute in r)&&(r[this.constructor._subModelTypeAttribute]=this.constructor._subModelTypeValue),t.each(this._relations,function(i){var s=r[i.key],o=i.options.includeInJSON,u=null;o===!0?s&&t.isFunction(s.toJSON)&&(u=s.toJSON(e)):t.isString(o)?(s instanceof n.Collection?u=s.pluck(o):s instanceof n.Model&&(u=s.get(o)),o===i.relatedModel.prototype.idAttribute&&(i instanceof n.HasMany?u=u.concat(i.keyIds):i instanceof n.HasOne&&(u=u||i.keyId,!u&&!t.isObject(i.keyContents)&&(u=i.keyContents||null)))):t.isArray(o)?s instanceof n.Collection?(u=[],s.each(function(e){var n={};t.each(o,function(t){n[t]=e.get(t)}),u.push(n)})):s instanceof n.Model&&(u={},t.each(o,function(e){u[e]=s.get(e)})):delete r[i.key],o&&(r[i.keyDestination]=u),i.keyDestination!==i.key&&delete r[i.key]}),this.release(),r}},{setup:function(e){return this.prototype.relations=(this.prototype.relations||[]).slice(0),this._subModels={},this._superModel=null,this.prototype.hasOwnProperty("subModelTypes")?n.Relational.store.addSubModels(this.prototype.subModelTypes,this):this.prototype.subModelTypes=null,t.each(this.prototype.relations||[],function(e){e.model||(e.model=this);if(e.reverseRelation&&e.model===this){var r=!0;if(t.isString(e.relatedModel)){var i=n.Relational.store.getObjectByName(e.relatedModel);r=i&&i.prototype instanceof n.RelationalModel}r?n.Relational.store.initializeRelation(null,e):t.isString(e.relatedModel)&&n.Relational.store.addOrphanRelation(e)}},this),this},build:function(e,t){this.initializeModelHierarchy();var n=this._findSubModelType(this,e)||this;return new n(e,t)},_findSubModelType:function(e,t){if(e._subModels&&e.prototype.subModelTypeAttribute in t){var n=t[e.prototype.subModelTypeAttribute],r=e._subModels[n];if(r)return r;for(n in e._subModels){r=this._findSubModelType(e._subModels[n],t);if(r)return r}}return null},initializeModelHierarchy:function(){this.inheritRelations();if(this.prototype.subModelTypes){var e=t.keys(this._subModels),r=t.omit(this.prototype.subModelTypes,e);t.each(r,function(e){var t=n.Relational.store.getObjectByName(e);t&&t.initializeModelHierarchy()})}},inheritRelations:function(){if(!t.isUndefined(this._superModel)&&!t.isNull(this._superModel))return;n.Relational.store.setupSuperModel(this);if(this._superModel){this._superModel.inheritRelations();if(this._superModel.prototype.relations){var e=t.filter(this._superModel.prototype.relations||[],function(e){return!t.any(this.prototype.relations||[],function(t){return e.relatedModel===t.relatedModel&&e.key===t.key},this)},this);this.prototype.relations=e.concat(this.prototype.relations)}}else this._superModel=!1},findOrCreate:function(e,n){n||(n={});var r=t.isObject(e)&&n.parse&&this.prototype.parse?this.prototype.parse(t.clone(e)):e,i=this.findModel(r);return t.isObject(e)&&(i&&n.merge!==!1?(delete n.collection,delete n.url,i.set(r,n)):!i&&n.create!==!1&&(i=this.build(e,n))),i},find:function(e,t){return t||(t={}),t.create=!1,this.findOrCreate(e,t)},findModel:function(e){return n.Relational.store.find(this,e)}}),t.extend(n.RelationalModel.prototype,n.Semaphore),n.Collection.prototype.__prepareModel=n.Collection.prototype._prepareModel,n.Collection.prototype._prepareModel=function(e,r){var i;return e instanceof n.Model?(e.collection||(e.collection=this),i=e):(r=r?t.clone(r):{},r.collection=this,typeof this.model.findOrCreate!="undefined"?i=this.model.findOrCreate(e,r):i=new this.model(e,r),i&&i.validationError&&(this.trigger("invalid",this,e,r),i=!1)),i};var i=n.Collection.prototype.__set=n.Collection.prototype.set;n.Collection.prototype.set=function(e,r){if(this.model.prototype instanceof n.RelationalModel){r&&r.parse&&(e=this.parse(e,r)),e=t.isArray(e)?e.slice():e?[e]:[];var s=[],o=[];t.each(e,function(e){e instanceof n.Model||(e=n.Collection.prototype._prepareModel.call(this,e,r)),e&&(o.push(e),!this.get(e)&&!this.get(e.cid)?s.push(e):e.id!=null&&(this._byId[e.id]=e))},this);var u=i.call(this,o,t.defaults({parse:!1},r));return t.each(s,function(e){(this.get(e)||this.get(e.cid))&&this.trigger("relational:add",e,this,r)},this),u}return i.apply(this,arguments)};var s=n.Collection.prototype.__remove=n.Collection.prototype.remove;n.Collection.prototype.remove=function(e,r){if(this.model.prototype instanceof n.RelationalModel){e=t.isArray(e)?e.slice():[e],r||(r={});var i=[];t.each(e,function(e){e=this.get(e)||e&&this.get(e.cid),e&&i.push(e)},this);var o=s.call(this,i,r);return t.each(i,function(e){this.trigger("relational:remove",e,this,r)},this),o}return s.apply(this,arguments)};var o=n.Collection.prototype.__reset=n.Collection.prototype.reset;n.Collection.prototype.reset=function(e,r){r=t.extend({merge:!0},r);var i=o.call(this,e,r);return this.model.prototype instanceof n.RelationalModel&&this.trigger("relational:reset",this,r),i};var u=n.Collection.prototype.__sort=n.Collection.prototype.sort;n.Collection.prototype.sort=function(e){var t=u.call(this,e);return this.model.prototype instanceof n.RelationalModel&&this.trigger("relational:reset",this,e),t};var a=n.Collection.prototype.__trigger=n.Collection.prototype.trigger;n.Collection.prototype.trigger=function(e){if(this.model.prototype instanceof n.RelationalModel){if(e==="add"||e==="remove"||e==="reset"||e==="sort"){var r=this,i=arguments;t.isObject(i[3])&&(i=t.toArray(i),i[3]=t.clone(i[3])),n.Relational.eventQueue.add(function(){a.apply(r,i)})}else a.apply(this,arguments);return this}return a.apply(this,arguments)},n.RelationalModel.extend=function(e,t){var r=n.Model.extend.apply(this,arguments);return r.setup(this),r}}(),define("vendor/backbone-relational/backbone-relational",function(){}),function(){define("aura_extensions/backbone-relational",["vendor/backbone-relational/backbone-relational"],function(){return{name:"relationalmodel",initialize:function(e){var t=e.core,n=e.sandbox;t.mvc.relationalModel=Backbone.RelationalModel,n.mvc.relationalModel=function(e){return t.mvc.relationalModel.extend(e)},define("mvc/relationalmodel",function(){return n.mvc.relationalModel}),n.mvc.HasMany=Backbone.HasMany,n.mvc.HasOne=Backbone.HasOne,define("mvc/hasmany",function(){return n.mvc.HasMany}),define("mvc/hasone",function(){return n.mvc.HasOne}),n.mvc.Store=Backbone.Relational.store,define("mvc/relationalstore",function(){return n.mvc.Store})}}})}(),define("aura_extensions/sulu-content-tabs",[],function(){return function(e){e.components.before("initialize",function(){if(!!this.content){typeof this.content=="function"&&(this.content=this.content.call(this));var e=this.sandbox.dom.createElement('<div id="sulu-content-container"/>');this.html(e),this.sandbox.util.load(this.content.url).then(function(t){var n=JSON.parse(t);this.sandbox.sulu.tabs.parseContentTabs(n,this.options.id,function(t){this.sandbox.start([{name:"content@suluadmin",options:{el:e,tabsData:t,heading:this.sandbox.translate(this.content.title),headingAddition:this.content.titleAddition,contentOptions:this.options,template:this.content.template?this.content.template:"default",parentTemplate:this.content.parentTemplate?this.content.parentTemplate:null}}])}.bind(this))}.bind(this))}}),e.sandbox.sulu={tabs:{parseContentTabs:function(t,n,r){var i,s,o;try{i=JSON.parse(t)}catch(u){i=t}e.sandbox.emit("navigation.url",function(t){var u=[];e.sandbox.util.foreach(i.items,function(e){s=e.contentDisplay.indexOf("new")>=0,o=e.contentDisplay.indexOf("edit")>=0;if(!n&&s||n&&o)e.action=this.parseActionUrl(e.action,t,n),e.action===t&&(e.selected=!0),u.push(e)}.bind(this)),i.url=t,i.items=u,!r||typeof r!="function"?e.sandbox.emit("navigation.item.column.show",{data:i}):r(i)}.bind(this))},parseActionUrl:function(e,t,n){if(e.substr(0,1)==="/")return e.substr(1,e.length);if(n){var r="edit:"+n;t=t.substr(0,t.indexOf(r)+r.length)}return t+"/"+e}}}}}),function(){define("aura_extensions/sulu-extension",[],{initialize:function(e){var t=e.sandbox.util.extend(!0,{},SULU.user.settings),n=function(e,t){var n=t?{}:[],r;for(r=0;r<e.length;r++)t?n[e[r].id]=r:n.push(e[r].id);return n},r="sulu.fields.loaded";e.sandbox.sulu.viewStates={},e.sandbox.sulu.loadUserSetting=function(n,r,i){t[n]?i(t[n]):e.sandbox.util.load(r).then(function(e){t[n]=e,i(e)}.bind(this)).fail(function(t){e.sandbox.logger.log("data could not be loaded:",t)}.bind(this))},e.sandbox.sulu.loadUrlAndMergeWithSetting=function(i,s,o,u){this.sandbox.util.load(o).then(function(o){var a=e.sandbox.sulu.getUserSetting(i),f=o,l=[],c,h,p,d,v,m,g;a?(v=n.call(this,f),m=n.call(this,f),g=n.call(this,f,!0),d=n.call(this,a),this.sandbox.util.foreach(d,function(e,t){h=m.indexOf(e);if(h>=0){c=f[h];for(var n in a[t])s.indexOf(n)<0&&(c[n]=a[t][n]);l.push(c),p=v.indexOf(e),v.splice(p,1)}}.bind(this)),this.sandbox.util.foreach(v,function(e){l.push(f[g[e]])}.bind(this))):l=f,t[i]=l,e.sandbox.emit(r,o),u(l)}.bind(this))},e.sandbox.sulu.getUserSetting=function(e){return t[e]?t[e]:null},e.sandbox.sulu.saveUserSetting=function(n,r,i){t[n]=r;var s={key:n,data:r};e.sandbox.util.ajax({type:"PUT",url:i,data:s,processData:!0,success:function(e){}.bind(this),error:function(t){e.sandbox.logger.log("error",t)}})},e.sandbox.sulu.initListToolbarAndList=function(e,t,n,r){this.sandbox.sulu.loadUrlAndMergeWithSetting.call(this,e,["translation","default","editable","validation","width"],t,function(i){var s={columnOptions:{data:i,key:e,url:t},instanceName:"content"},o=this.sandbox.util.extend(!0,{},s,n),u={paginationOptions:{pageSize:10},pagination:!0,sortable:!0,selectItem:{type:"checkbox"},removeRow:!1,excludeFields:[""]},a=this.sandbox.util.extend(!0,{},u,r);this.sandbox.start([{name:"list-toolbar@suluadmin",options:o}]),a.fieldsData=i,a.searchInstanceName=a.searchInstanceName?a.searchInstanceName:o.instanceName,a.columnOptionsInstanceName=a.columnOptionsInstanceName?a.columnOptionsInstanceName:o.instanceName,a.contentContainer="#content",this.sandbox.start([{name:"datagrid@husky",options:a}])}.bind(this))}}})}(),define("aura_extensions/sulu-view",[],function(){return function(e){e.components.before("initialize",function(){!this.view||this.sandbox.emit("sulu.view.initialize")})}}),define("__component__$app@suluadmin",[],function(){var e,t="sulu.app.",n=function(){return a("initialized")},r=function(){return a("content.dimensions-changed")},i=function(){return a("viewport.dimensions-changed")},s=function(){return a("content.dimensions-change")},o=function(){return a("content.get-dimensions")},u=function(){return a("has-started")},a=function(e){return t+e},f=function(e){this.sandbox.dom.css(this.$el,{"margin-left":e})};return{name:"Sulu App",initialize:function(){this.title=document.title;if(!!this.sandbox.mvc.routes){var t=this.sandbox.mvc.Router({routes:{"*actions":"defaultAction"},defaultAction:function(){}});e=new t,this.sandbox.util._.each(this.sandbox.mvc.routes,function(t){e.route(t.route,function(){t.callback.apply(this,arguments)}.bind(this))}.bind(this)),this.contentChangeInterval=null,this.contentDimensions={left:null,width:null},this.currentRoute=null,this.bindCustomEvents(),this.sandbox.emit(n.call(this))}},selectNavigationItem:function(e){this.sandbox.emit("husky.navigation.select-item",e,!1)},bindDomEvents:function(){this.sandbox.dom.on(this.sandbox.dom.$window,"resize",function(){this.emitContentDimensionsChangedEvent(),this.emitViewPortDimensionsChanged()}.bind(this))},emitViewPortDimensionsChanged:function(){var e=this.sandbox.dom.width(window),t=this.sandbox.dom.height(window);this.sandbox.emit(i.call(this),{width:e,height:t})},emitContentDimensionsChangedEvent:function(){var e=this.getContentDimensions();if(this.contentDimensions.width!==e.width||this.contentDimensions.left!==e.left)this.sandbox.emit(r.call(this),e),this.contentDimensions=e},getContentDimensions:function(){return{width:this.sandbox.dom.width(this.$el),left:Math.round(this.sandbox.dom.offset(this.$el).left+parseInt(this.sandbox.dom.css(this.$el,"padding-left").replace(/[^-\d\.]/g,"")))}},startLoader:function(){var e=this.sandbox.dom.createElement('<div class="sulu-app-loader">');this.sandbox.dom.css(e,{"margin-top":this.sandbox.dom.height(this.sandbox.dom.$window)/2-75+"px"}),this.sandbox.dom.append(this.$el,e),this.sandbox.start([{name:"loader@husky",options:{el:e,size:"150px",color:"#cacaca"}}])},bindCustomEvents:function(){this.sandbox.on("sulu.router.navigate",function(t,n,r){n=typeof n!="undefined"?n:!0,!!n&&this.currentRoute!==t&&this.currentRoute!==null&&(this.sandbox.stop("#edit-toolbar"),this.sandbox.stop("#content > *"),this.sandbox.stop("#preview > *")),this.sandbox.mvc.Store.reset(),this.sandbox.dom.css("#content","max-width",""),e.navigate(t,{trigger:n}),this.sandbox.dom.scrollTop(this.sandbox.dom.$window,0),r!==!0&&this.currentRoute!==t&&this.currentRoute!==null&&this.startLoader(),this.currentRoute=t}.bind(this)),this.sandbox.on("husky.navigation.item.select",function(e){this.emitNavigationEvent(e,!1),e.parentTitle?this.setTitlePostfix(this.sandbox.translate(e.parentTitle)):!e.title||this.setTitlePostfix(this.sandbox.translate(e.title))}.bind(this)),this.sandbox.on("husky.tabs.content.item.select",function(e){this.emitNavigationEvent(e,!0)}.bind(this)),this.sandbox.on("husky.navigation.size.change",function(){this.contentChangeInterval=setInterval(this.emitContentDimensionsChangedEvent.bind(this),30)}.bind(this)),this.sandbox.on("husky.navigation.size.changed",function(){clearInterval(this.contentChangeInterval),this.emitContentDimensionsChangedEvent()}.bind(this)),this.sandbox.on("navigation.url",function(e){e(this.sandbox.mvc.history.fragment)},this),this.sandbox.on(o.call(this),function(e){e(this.getContentDimensions())}.bind(this)),this.sandbox.on("husky.navigation.size.change",f.bind(this)),this.sandbox.on(u.call(this),function(e){e(!0)}.bind(this)),this.sandbox.on(s.call(this),function(e){this.changeContentStyles(e)}.bind(this)),this.sandbox.on("sulu.view.initialize",function(){this.sandbox.stop(".sulu-app-loader")}.bind(this)),this.sandbox.on("husky.navigation.initialized",function(){!!this.sandbox.mvc.history.fragment&&this.sandbox.mvc.history.fragment.length>0&&this.selectNavigationItem(this.sandbox.mvc.history.fragment)}.bind(this)),this.sandbox.on("husky.navigation.user-locale.changed",function(e){this.changeUserLocale(e)}.bind(this))},changeUserLocale:function(e){this.sandbox.util.ajax({type:"PATCH",url:"/admin/api/users/"+this.options.user.id,contentType:"application/json",dataType:"json",data:JSON.stringify({locale:e}),success:function(){this.sandbox.dom.window.location.reload()}.bind(this)})},changeContentStyles:function(e){this.sandbox.dom.animate(this.$el,{width:e.width+"px",paddingLeft:e.paddingLeft+"px"},{duration:500,queue:!1,progress:this.emitContentDimensionsChangedEvent.bind(this)}),f.call(this,e.left)},setTitlePostfix:function(e){document.title=this.title+" - "+e},emitNavigationEvent:function(e,t,n){n===!0&&this.selectNavigationItem(e.action),!e.action||this.sandbox.emit("sulu.router.navigate",e.action,e.forceReload,t)}}}),define("__component__$content@suluadmin",[],function(){var e={heading:"",headingAddition:"",tabsData:null,instanceName:"content",template:"default",parentTemplate:null},t={skeleton:function(){return['<div id="edit-toolbar-container">','   <div id="page-functions"></div>','   <div id="edit-toolbar"></div>',"</div>",'<div class="content-tabs-content">','   <div class="headlines">',"       <h1>"+this.options.heading+"</h1>","   </div>",'   <div id="content-tabs" />',"</div>"].join("")}},n=function(){if(!!this.options.tabsData&&!!this.options.tabsData.items&&this.options.tabsData.items.length<=1)return this.options.tabsData.items.length!==0&&this.startTabComponent(),!1;this.sandbox.start([{name:"tabs@husky",options:{el:"#content-tabs",data:this.options.tabsData,instanceName:this.options.instanceName,forceReload:!1,forceSelect:!0}}])},r=function(){this.sandbox.start([{name:"page-functions@husky",options:{el:"#page-functions",data:{icon:"chevron-left"}}},{name:"edit-toolbar@suluadmin",options:{el:"#edit-toolbar",instanceName:this.options.instanceName,forceReload:!1,template:this.options.template,parentTemplate:this.options.parentTemplate}}])},i=function(e){this.sandbox.dom.html(this.sandbox.dom.find("h1",this.$headlines),e)},s=function(e){this.sandbox.dom.html(this.sandbox.dom.find("h6",this.$headlines),e)},o=function(){typeof this.options.headingAddition!="undefined"&&this.options.headingAddition!==null&&(this.sandbox.dom.addClass(this.$headlines,"compoundedHeadlines"),this.sandbox.dom.prepend(this.$headlines,"<h6>"+this.options.headingAddition+"</div>"))};return{view:!0,initialize:function(){this.options=this.sandbox.util.extend(!0,{},e,this.options),this.html(t.skeleton.call(this)),this.$headlines=this.$find(".headlines"),o.call(this),this.bindCustomEvents(),r.call(this),n.call(this)},bindCustomEvents:function(){var e=this.options.instanceName&&this.options.instanceName!==""?this.options.instanceName+".":"";this.sandbox.on("husky.tabs."+e+"initialized",this.startTabComponent.bind(this)),this.sandbox.on("husky.tabs."+e+"item.select",this.startTabComponent.bind(this)),this.sandbox.on("sulu.content.tabs.deactivate",function(){this.sandbox.emit("husky.tabs."+e+"deactivate")}.bind(this)),this.sandbox.on("sulu.content.tabs.activate",function(){this.sandbox.emit("husky.tabs."+e+"activate")}.bind(this)),this.sandbox.on("husky.page-functions.clicked",function(){this.sandbox.emit("sulu.edit-toolbar.back")}.bind(this)),this.sandbox.on("sulu.content.set-title",i.bind(this)),this.sandbox.on("sulu.content.set-title-addition",s.bind(this))},startTabComponent:function(e){e||(e=this.options.tabsData.items[0]);if(!e.forceReload&&e.action===this.action){this.sandbox.logger.log("page already loaded; no reload required!");return}this.sandbox.mvc.Store.reset(),this.sandbox.stop("#content-tabs-component"),this.sandbox.dom.append(this.$el,'<div id="content-tabs-component"><span class="is-loading"/></div>');if(!!e&&!!e.contentComponent){var t=this.sandbox.util.extend(!0,{},this.options.contentOptions,{el:"#content-tabs-component",reset:!0},e.contentComponentOptions);this.sandbox.start([{name:e.contentComponent,options:t}])}!e||(this.action=e.action)}}}),define("__component__$dialog@suluadmin",[],function(){var e;return{name:"Sulu Dialog",initialize:function(){this.bindCustomEvents()},bindCustomEvents:function(){this.sandbox.on("sulu.dialog.confirmation.show",function(e,t){this.showConfirmationDialog(e,t)}.bind(this)),this.sandbox.on("sulu.dialog.error.show",function(e){this.showErrorDialog(e)}.bind(this)),this.sandbox.on("sulu.dialog.ok.show",function(e,t){this.showOkDialog(e,t)}.bind(this))},createDialogElement:function(){e=this.sandbox.dom.createElement('<div id="dialog"></div>'),this.sandbox.dom.append(this.$el,e)},startComponent:function(e){this.sandbox.start([e],{reset:!0})},showConfirmationDialog:function(t,n){this.createDialogElement(),this.startComponent({name:"dialog@husky",options:{el:e,templateType:n,data:t}})},showErrorDialog:function(t){this.createDialogElement(),this.startComponent({name:"dialog@husky",options:{el:e,templateType:"okDialog",data:{content:{title:"An error occured!",content:t},callback:{cancel:function(){this.sandbox.emit("husky.dialog.hide")}.bind(this)}}}}),this.sandbox.once("husky.dialog.cancel",function(){this.sandbox.emit("husky.dialog.hide")}.bind(this))},showOkDialog:function(t,n){this.createDialogElement(),this.startComponent({name:"dialog@husky",options:{el:e,templateType:"okDialog",data:{content:{title:t,content:n},callback:{cancel:function(){this.sandbox.emit("husky.dialog.hide")}.bind(this)}}}}),this.sandbox.once("husky.dialog.cancel",function(){this.sandbox.emit("husky.dialog.hide")}.bind(this))}}}),define("__component__$edit-toolbar@suluadmin",[],function(){var e={heading:"",template:"default",parentTemplate:null,instanceName:"content",changeStateCallback:null,parentChangeStateCallback:null,containerSelector:"#edit-toolbar-container"},t={"default":function(){return[{id:"save-button",icon:"floppy",disabledIcon:"floppy-saved",iconSize:"large","class":"highlight",position:1,disabled:!0,callback:function(){this.sandbox.emit("sulu.edit-toolbar.save")}.bind(this)},{icon:"cogwheel",iconSize:"large",group:"left",id:"options-button",position:30,items:[{title:this.sandbox.translate("sulu.edit-toolbar.delete"),callback:function(){this.sandbox.emit("sulu.edit-toolbar.delete")}.bind(this)}]}]}},n={"default":function(e,t,n){e?this.sandbox.emit("husky.edit-toolbar.item.disable","save-button",!!n):this.sandbox.emit("husky.edit-toolbar.item.enable","save-button",!1)}},r=function(e){var n=e;if(typeof e=="string")try{n=JSON.parse(e)}catch(r){t[e]?n=t[e].call(this):this.sandbox.logger.log("no template found!")}else typeof n=="function"&&(n=e());return n},i=function(e){if(!!n[e])return n[e];this.sandbox.logger.log("no template found!")};return{view:!0,initialize:function(){this.options=this.sandbox.util.extend(!0,{},e,this.options),this.$container=this.sandbox.dom.$(this.options.containerSelector),this.buildTemplate(this.options.template,this.options.parentTemplate),this.startComponent(),this.buttonsWidth=null,this.collapsed=!1,this.toolbarWidth=null,this.sandbox.emit("sulu.app.content.get-dimensions",this.resizeListener.bind(this)),this.bindCustomEvents()},buildTemplate:function(e,t){this.options.template=r.call(this,e);if(!this.options.changeStateCallback||typeof this.options.changeStateCallback!="function")this.options.changeStateCallback=i.call(this,e);if(this.options.parentTemplate!==null){this.options.parentTemplate=r.call(this,t);if(!this.options.parentChangeStateCallback||typeof this.options.parentChangeStateCallback!="function")this.options.parentChangeStateCallback=i.call(this,t);this.options.template=this.options.template.concat(this.options.parentTemplate)}},startComponent:function(){var e=this.sandbox.dom.createElement("<div />");this.html(e),this.sandbox.start([{name:"edit-toolbar@husky",options:{el:e,pageFunction:this.options.pageFunction,data:this.options.template}}])},bindCustomEvents:function(){var e=this.options.instanceName&&this.options.instanceName!==""?this.options.instanceName+".":"";this.sandbox.on("sulu.edit-toolbar."+e+"state.change",function(e,t,n){this.changeState(e,t,n)}.bind(this)),this.sandbox.on("sulu.app.content.dimensions-changed",this.resizeListener.bind(this)),this.sandbox.on("sulu.edit-toolbar."+e+"items.set",function(e,t){this.sandbox.emit("husky.edit-toolbar.items.set",e,t)}.bind(this)),this.sandbox.on("sulu.edit-toolbar."+e+"button.set",function(e,t){this.sandbox.emit("husky.edit-toolbar.button.set",e,t)}.bind(this)),this.sandbox.on("sulu.edit-toolbar."+e+"item.loading",function(e){this.sandbox.emit("husky.edit-toolbar.item.loading",e)}.bind(this)),this.sandbox.on("sulu.edit-toolbar."+e+"item.change",function(e,t){this.sandbox.emit("husky.edit-toolbar.item.change",e,t)}.bind(this)),this.sandbox.on("sulu.edit-toolbar."+e+"item.show",function(e,t){this.sandbox.emit("husky.edit-toolbar.item.show",e,t)}.bind(this)),this.sandbox.on("sulu.edit-toolbar."+e+"item.enable",function(e,t){this.sandbox.emit("husky.edit-toolbar.item.enable",e,t)}.bind(this)),this.sandbox.on("husky.edit-toolbar.initialized",function(){this.sandbox.emit("husky.edit-toolbar.get-buttons-width",function(e){this.buttonsWidth=e,this.collapseHandler()}.bind(this))}.bind(this)),this.sandbox.on("husky.edit-toolbar.buttons.width-changed",function(){this.sandbox.emit("husky.edit-toolbar.get-buttons-width",function(e){this.buttonsWidth=e,this.collapseHandler(),this.setMinWidth()}.bind(this))}.bind(this))},resizeListener:function(e){this.sandbox.dom.width(this.$el,e.width),this.toolbarWidth=e.width,this.sandbox.dom.css(this.$container,{"padding-left":e.left+"px"}),this.collapseHandler()},collapseHandler:function(){this.buttonsWidth!==null&&(this.buttonsWidth+5>=this.toolbarWidth&&this.collapsed===!1?this.collapse():this.buttonsWidth+5<this.toolbarWidth&&this.collapsed===!0&&this.expand())},setMinWidth:function(){this.sandbox.emit("husky.edit-toolbar.get-buttons-collapsed-width",function(e){this.sandbox.dom.css(this.$el,{"min-width":e+"px"})}.bind(this))},collapse:function(){this.sandbox.emit("husky.edit-toolbar.collapse"),this.collapsed=!0,this.setMinWidth()},expand:function(){this.sandbox.emit("husky.edit-toolbar.expand"),this.collapsed=!1},changeState:function(e,t,n){typeof this.options.changeStateCallback=="function"&&this.options.changeStateCallback.call(this,t,e,n),typeof this.options.parentChangeStateCallback=="function"&&this.options.parentChangeStateCallback.call(this,t,e,n)}}}),define("__component__$list-toolbar@suluadmin",[],function(){var e={heading:"",template:"default",parentTemplate:null,listener:"default",parentListener:null,instanceName:"content",columnOptions:{disabled:!1,data:[],key:null}},t={"default":function(){return[{id:"add",icon:"user-add","class":"highlight",title:"add",callback:function(){this.sandbox.emit("sulu.list-toolbar.add")}.bind(this)},{id:"delete",icon:"bin",title:"delete",group:"1",disabled:!0,callback:function(){this.sandbox.emit("sulu.list-toolbar.delete")}.bind(this)},{id:"settings",icon:"cogwheel",group:"1",items:[{title:this.sandbox.translate("sulu.list-toolbar.import"),disabled:!0},{title:this.sandbox.translate("sulu.list-toolbar.export"),disabled:!0},{title:this.sandbox.translate("list-toolbar.column-options"),disabled:!1,callback:function(){var e;this.sandbox.dom.append("body",'<div id="column-options-overlay" />'),this.sandbox.start([{name:"column-options@husky",options:{el:"#column-options-overlay",data:this.sandbox.sulu.getUserSetting(this.options.columnOptions.key),hidden:!1,instanceName:this.options.instanceName,trigger:".toggle"}}]),e=this.options.instanceName?this.options.instanceName+".":"",this.sandbox.once("husky.column-options."+e+"saved",function(e){this.sandbox.sulu.saveUserSetting(this.options.columnOptions.key,e,this.options.columnOptions.url)}.bind(this))}.bind(this)}]}]},defaultEditableList:function(){var e=t.default.call(this);return e.splice(1,0,{icon:"floppy-saved",iconSize:"large",group:"1",disabled:!0,id:"save",title:this.sandbox.translate("sulu.list-toolbar.save"),callback:function(){this.sandbox.emit("sulu.list-toolbar.save")}.bind(this)}),e}},n={"default":function(){var e=this.options.instanceName?this.options.instanceName+".":"",t;this.sandbox.on("husky.datagrid.number.selections",function(n){t=n>0?"enable":"disable",this.sandbox.emit("husky.toolbar."+e+"item."+t,"delete")}.bind(this))},defaultEditableList:function(){var e=this.options.instanceName?this.options.instanceName+".":"";n.default.call(this),this.sandbox.on("husky.datagrid.data.changed",function(){this.sandbox.emit("husky.toolbar."+e+"item.enable","save")}.bind(this))}},r=function(e,t){var n=e.slice(0),r=[];return this.sandbox.util.foreach(e,function(e){r.push(e.id)}.bind(this)),this.sandbox.util.foreach(t,function(e){var t=r.indexOf(e.id);t<0?n.push(e):n[t]=e}.bind(this)),n},i=function(e,t){if(typeof e=="string")try{e=JSON.parse(e)}catch(n){t[e]?e=t[e].call(this):this.sandbox.logger.log("no template found!")}else typeof e=="function"&&(e=e.call(this));return e};return{view:!0,initialize:function(){this.options=this.sandbox.util.extend(!0,{},e,this.options),this.options.template=i.call(this,this.options.template,t),this.options.listener=i.call(this,this.options.listener,n),!this.options.parentTemplate||(this.options.parentTemplate=i.call(this,this.options.parentTemplate,t),this.options.parentListener=i.call(this,this.options.parentListener,n),this.options.template=r.call(this,this.options.parentTemplate,this.options.template));var s=this.sandbox.dom.createElement("<div />");this.html(s),this.options.listener&&this.options.listener.call(this),this.options.parentListener&&this.options.parentListener.call(this),this.sandbox.start([{name:"toolbar@husky",options:{hasSearch:!0,el:s,data:this.options.template,instanceName:this.options.instanceName,searchOptions:{placeholderText:"public.search"}}}])},bindCustomEvents:function(){}}}),define("__component__$labels@suluadmin",[],function(){var e="sulu.labels.",t=function(){return u.call(this,"error.show")},n=function(){return u.call(this,"warning.show")},r=function(){return u.call(this,"success.show")},i=function(){return u.call(this,"label.show")},s=function(){return u.call(this,"remove")},o=function(){return u.call(this,"label.remove")},u=function(t){return e+t};return{view:!0,initialize:function(){this.appStarted=!1,this.sandbox.emit("sulu.app.has-started",function(e){this.appStarted=e}.bind(this)),this.appStarted===!0?this.startComponent():this.sandbox.on("sulu.app.initialized",this.startComponent.bind(this))},startComponent:function(){this.labelId=0,this.bindCustomEvents(),this.sandbox.emit("sulu.app.content.get-dimensions",this.resizeListener.bind(this))},bindCustomEvents:function(){this.sandbox.on("sulu.app.content.dimensions-changed",this.resizeListener.bind(this)),this.sandbox.on(t.call(this),function(e,t,n){this.showLabel("ERROR",e,t,n)}.bind(this)),this.sandbox.on(n.call(this),function(e,t,n){this.showLabel("WARNING",e,t,n)}.bind(this)),this.sandbox.on(r.call(this),function(e,t,n){this.showLabel("SUCCESS",e,t,n)}.bind(this)),this.sandbox.on(i.call(this),function(e,t){e.el=this.createLabelContainer(t),this.startLabelComponent(e)}.bind(this)),this.sandbox.on(s.call(this),function(){this.removeLabels()}.bind(this)),this.sandbox.on("sulu.router.navigate",function(){this.removeLabels()}.bind(this)),this.sandbox.on(o.call(this),function(e){this.removeLabelWithId(e)}.bind(this))},removeLabels:function(){this.sandbox.dom.html(this.$el,"")},resizeListener:function(e){this.sandbox.dom.width(this.$el,e.width),this.sandbox.dom.css(this.$el,{"margin-left":e.left+"px"})},createLabelContainer:function(e){var t=this.sandbox.dom.createElement("<div/>"),n;return typeof e!="undefined"?(n=e,this.removeLabelWithId(e)):(this.labelId=this.labelId+1,n=this.labelId),this.sandbox.dom.attr(t,"id","sulu-labels-"+n),this.sandbox.dom.attr(t,"data-id",n),this.sandbox.dom.append(this.$el,t),t},removeLabelWithId:function(e){this.sandbox.dom.remove(this.sandbox.dom.find("[data-id='"+e+"']",this.$el))},showLabel:function(e,t,n,r){this.startLabelComponent({type:e,description:this.sandbox.translate(t),title:this.sandbox.translate(n),el:this.createLabelContainer(r)})},startLabelComponent:function(e){this.sandbox.start([{name:"label@husky",options:e}])}}});