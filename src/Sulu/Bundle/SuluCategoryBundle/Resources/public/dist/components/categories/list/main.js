define(function(){"use strict";var a={toolbarSelector:"#list-toolbar-container",listSelector:"#categories-list"};return{view:!0,fullSize:{width:!0},header:function(){return{title:"category.categories.title",noBack:!0,breadcrumb:[{title:"navigation.settings"},{title:"category.categories.title"}]}},templates:["/admin/category/template/category/list"],initialize:function(){this.sandbox.sulu.triggerDeleteSuccessLabel("labels.success.category-delete-desc"),this.render(),this.bindCustomEvents()},bindCustomEvents:function(){this.sandbox.on("sulu.list-toolbar.add",this.addNewCategory.bind(this)),this.sandbox.on("sulu.list-toolbar.delete",this.deleteSelected.bind(this))},render:function(){this.sandbox.dom.html(this.$el,this.renderTemplate("/admin/category/template/category/list")),this.sandbox.sulu.initListToolbarAndList.call(this,"categoriesFields","/admin/api/categories/fields",{el:this.$find(a.toolbarSelector),template:"default",instanceName:this.instanceName,inHeader:!0},{el:this.$find(a.listSelector),url:"/admin/api/categories?depth=0",childrenPropertyName:"children",viewOptions:{table:{fullWidth:!0,selectItem:{type:"checkbox",inFirstCell:!0},icons:[{column:"name",icon:"pencil",callback:this.editCategory.bind(this)},{column:"name",icon:"plus-circle",callback:this.addNewCategory.bind(this)}]}}})},addNewCategory:function(a){this.sandbox.emit("sulu.category.categories.form-add",a)},editCategory:function(a){this.sandbox.emit("sulu.category.categories.form",a)},deleteSelected:function(){this.sandbox.emit("husky.datagrid.items.get-selected",function(a){this.sandbox.emit("sulu.category.categories.delete",a,function(a){this.sandbox.emit("husky.datagrid.record.remove",a)}.bind(this),function(){this.sandbox.emit("sulu.labels.success.show","labels.success.category-delete-desc","labels.success")}.bind(this))}.bind(this))}}});