define(function(){"use strict";var a="sulu.media-edit.",b={infoKey:"public.info"},c={infoFormId:"media-info"},d=function(){return e.call(this,"edit")},e=function(b){return a+(this.options.instanceName?this.options.instanceName+".":"")+b};return{view:!0,templates:["/admin/media/template/media/media-info"],initialize:function(){this.options=this.sandbox.util.extend(!0,{},b,this.options),this.bindCustomEvents(),this.sandbox.dom.width(this.$el,0),this.sandbox.dom.height(this.$el,0),this.media=null},bindCustomEvents:function(){this.sandbox.on(d.call(this),this.editMedia.bind(this))},editMedia:function(a){this.media=a,this.$info=this.renderTemplate("/admin/media/template/media/media-info"),this.startOverlay()},startOverlay:function(){var a=this.sandbox.dom.createElement("<div/>");this.sandbox.dom.append(this.$el,a),this.sandbox.once("husky.overlay.media-edit.opened",function(){this.sandbox.form.create("#"+c.infoFormId),this.sandbox.form.setData("#"+c.infoFormId,this.media)}.bind(this)),this.sandbox.start([{name:"overlay@husky",options:{el:a,title:this.media.title,tabs:[{title:this.sandbox.translate(this.options.infoKey),data:this.$info}],openOnStart:!0,removeOnClose:!0,instanceName:"media-edit",okCallback:this.changeModel.bind(this)}}])},changeModel:function(){if(!this.sandbox.form.validate("#"+c.infoFormId))return!1;var a=this.sandbox.form.getData("#"+c.infoFormId);this.media=this.sandbox.util.extend(!0,{},this.media,a),this.sandbox.emit("sulu.media.collections.save-media",this.media),this.media=null}}});