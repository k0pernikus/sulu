define(function(){"use strict";var a={data:{},instanceName:"undefined",newCollectionColor:"#cccccc",newCollectionTitle:"sulu.media.new-collection"},b={openAllKey:"public.open-all",closeAllKey:"public.close-all",toggleAllClass:"toggle-all",slideDownIcon:"caret-right",slideUpIcon:"caret-down",newFormId:"collection-new"},c={toggleAll:['<span class="fa-<%= icon %> icon"></span>',"<span><%= text %></span>"].join("")};return{view:!0,fullSize:{width:!0,keepPaddings:!0},header:{title:"media.collections.title",noBack:!0,breadcrumb:[{title:"navigation.media"},{title:"media.collections.title"}]},templates:["/admin/media/template/collection/new"],initialize:function(){this.options=this.sandbox.util.extend(!0,{},a,this.options),this.sandbox.sulu.triggerDeleteSuccessLabel("labels.success.collection-deleted-desc"),this.toggleAll={$element:null,allOpen:!1},this.$overlayContent=null,this.toolbarStarted=!1,this.bindCustomEvents(),this.render(),this.startListToolbar(),this.bindDomEvents()},bindCustomEvents:function(){this.sandbox.on("sulu.list-toolbar.add",this.openOverlay.bind(this)),this.sandbox.on("sulu.header.initialized",this.startListToolbar.bind(this)),this.sandbox.on("sulu.media.collections.collection-changed",this.updateCollection.bind(this)),this.sandbox.on("sulu.list-toolbar.delete",this.deleteMedia.bind(this)),this.sandbox.on("sulu.media.collections.media-saved",function(){}.bind(this))},deleteMedia:function(){},addCollection:function(){if(!this.sandbox.form.validate("#"+b.newFormId))return!1;var a=this.sandbox.form.getData("#"+b.newFormId),c={mediaNumber:0,style:{color:a.color}};c=this.sandbox.util.extend(!0,{},c,a),this.sandbox.emit("sulu.media.collections.save-collection",c)},startListToolbar:function(){if(this.toolbarStarted===!1){this.toolbarStarted=!0;var a=this.sandbox.dom.createElement("</div>");this.sandbox.dom.append(this.$el,a),this.sandbox.start([{name:"list-toolbar@suluadmin",options:{el:a,instanceName:this.options.instanceName,template:"defaultNoSettings",inHeader:!0}}])}},render:function(){this.toggleAll.$element=this.sandbox.dom.createElement('<div class="'+b.toggleAllClass+'"/>'),this.sandbox.dom.html(this.toggleAll.$element,this.sandbox.util.template(c.toggleAll)({icon:b.slideDownIcon,text:this.sandbox.translate(b.openAllKey)})),this.sandbox.dom.append(this.$el,this.toggleAll.$element),this.sandbox.start([{name:"grid-group@suluadmin",options:{}}]),this.initializeOverlay()},initializeOverlay:function(){var a=this.sandbox.dom.createElement('<div class="overlay-element"/>');this.sandbox.dom.append(this.$el,a),this.$overlayContent=this.renderTemplate("/admin/media/template/collection/new"),this.sandbox.once("husky.overlay.add-collection.opened",function(){this.sandbox.start("#"+b.newFormId),this.sandbox.form.create("#"+b.newFormId),this.sandbox.form.setData("#"+b.newFormId,{title:this.sandbox.translate(this.options.newCollectionTitle),color:this.options.newCollectionColor})}.bind(this)),this.sandbox.start([{name:"overlay@husky",options:{el:a,title:this.sandbox.translate("sulu.media.add-collection"),instanceName:"add-collection",data:this.$overlayContent,okCallback:this.addCollection.bind(this)}}])},openOverlay:function(){this.sandbox.emit("husky.overlay.add-collection.open")},updateCollection:function(){},showAllFiles:function(a){this.sandbox.emit("sulu.media.collections.collection-edit",a)},bindDomEvents:function(){this.sandbox.dom.on(this.toggleAll.$element,"click",this.toggleAllCollections.bind(this))},toggleAllCollections:function(){this.toggleAll.allOpen===!0?(this.toggleAll.allOpen=!1,this.sandbox.dom.html(this.toggleAll.$element,this.sandbox.util.template(c.toggleAll)({icon:b.slideDownIcon,text:this.sandbox.translate(b.openAllKey)}))):(this.toggleAll.allOpen=!0,this.sandbox.dom.html(this.toggleAll.$element,this.sandbox.util.template(c.toggleAll)({icon:b.slideUpIcon,text:this.sandbox.translate(b.closeAllKey)})))}}});