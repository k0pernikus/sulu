define(["app-config"],function(){"use strict";var a={skeleton:function(a,b,c,d){return['<div id="top-toolbar"></div>','<div id="split-screen">','<div id="form" class="grid" data-aura-component="content@sulucontent" data-aura-id="',a,'" data-aura-webspace="',c,'" data-aura-language="',d,'" data-aura-display="form" data-aura-preview="true"></div>','<div id="preview"><iframe src="',b,"/admin/content/preview/",a,'" width="1024" height="768"></iframe></div>',"</div>"].join("")}},b=function(){return[{id:"exit",icon:"times",container:"left",align:"left",customClass:"exit",closeComponent:!0,callback:function(){window.close()}.bind(this)},{id:3,icon:"trash-o",container:"left",align:"right",customClass:"delete",callback:function(){this.sandbox.emit("husky.top-toolbar.delete.loading"),this.sandbox.emit("sulu.preview.delete")}.bind(this)},{id:"save",icon:"floppy-o",container:"left",align:"right",customClass:"save",highlight:!0,disabled:!0,callback:function(){this.sandbox.emit("husky.top-toolbar.save.loading"),this.sandbox.emit("sulu.preview.save")}.bind(this)}]};return{view:!0,initialize:function(){this.render(),this.bindCustomEvents()},bindCustomEvents:function(){this.sandbox.on("sulu.preview.state.change",function(a){a?this.sandbox.emit("husky.top-toolbar.save.disable",!0):this.sandbox.emit("husky.top-toolbar.save.enable")},this),this.sandbox.on("sulu.preview.deleted",function(){window.close()},this)},render:function(){this.html(a.skeleton(this.options.id,this.options.url,this.options.webspace,this.options.language));var c=this.sandbox.dom.find("#form").outerWidth()+10,d=this.sandbox.dom.find("#split-screen").outerWidth();this.sandbox.dom.find("#preview").css("width",d-c),this.sandbox.start([{name:"top-toolbar@husky",options:{el:"#top-toolbar",data:b.call(this)}}])}}});