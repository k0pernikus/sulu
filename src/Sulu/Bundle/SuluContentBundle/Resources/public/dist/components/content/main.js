define(["sulucontent/model/content"],function(a){"use strict";return{initialize:function(){this.load()},load:function(){this.model=new a({id:this.options.id}),this.model.fullFetch(this.options.webspace,this.options.language,!0,{success:function(a){this.render(a.toJSON())}.bind(this)})},render:function(a){this.data=a,this.setTitle(a),this.setBreadcrumb(a),this.setTemplate(a)},setTemplate:function(a){this.sandbox.emit("sulu.header.toolbar.item.change","template",a.template),this.sandbox.emit("sulu.header.toolbar.item.show","template")},setTitle:function(a){this.options.id&&""!==a["sulu.node.name"]?this.sandbox.emit("sulu.header.set-title",a["sulu.node.name"]):this.sandbox.emit("sulu.header.set-title",this.sandbox.translate("content.contents.title"))},setBreadcrumb:function(a){if(a.breadcrumb){var b,c,d=[{title:this.options.webspace.replace(/_/g,"."),event:"sulu.content.contents.list"}];for(c=0,b=a.breadcrumb.length;++c<b;)d.push({title:a.breadcrumb[c].title,link:this.getBreadcrumbRoute(a.breadcrumb[c].uuid)});this.sandbox.emit("sulu.header.set-breadcrumb",d)}},getBreadcrumbRoute:function(a){return this.sandbox.mvc.history.fragment.replace(this.options.id,a)},header:function(){var a="index"===this.options.id?!0:!1;return{noBack:a,tabs:{url:"/admin/content/navigation/content"},toolbar:{parentTemplate:"default",languageChanger:{url:"/admin/content/languages/"+this.options.webspace,preSelected:this.options.language},template:[{id:"state",group:"left",position:100,type:"select",items:[{id:"publish",title:this.sandbox.translate("toolbar.state-publish"),icon:"husky-publish",callback:function(){this.sandbox.emit("sulu.dropdown.state.item-clicked",2)}.bind(this)},{id:"test",title:this.sandbox.translate("toolbar.state-test"),icon:"husky-test",callback:function(){this.sandbox.emit("sulu.dropdown.state.item-clicked",1)}.bind(this)}]},{id:"template",icon:"pencil",iconSize:"large",group:"left",position:10,type:"select",title:"",hidden:!0,itemsOption:{url:"/admin/content/template",titleAttribute:"template",idAttribute:"template",translate:!0,languageNamespace:"template.",callback:function(a){this.sandbox.emit("sulu.dropdown.template.item-clicked",a)}.bind(this)}}]}}}}});