define([],function(){"use strict";return{templates:["/admin/content/template/form/external-link"],initialize:function(){this.sandbox.emit("sulu.app.ui.reset",{navigation:"small",content:"auto"}),this.sandbox.emit("husky.toolbar.header.item.disable","template",!1),this.formId="#content-form",this.load(),this.bindCustomEvents()},bindCustomEvents:function(){this.sandbox.on("sulu.header.toolbar.save",function(){this.submit()},this)},submit:function(){if(this.sandbox.logger.log("save Model"),this.sandbox.form.validate(this.formId)){var a=this.sandbox.form.getData(this.formId);this.data=this.sandbox.util.extend({},this.data,a),this.sandbox.emit("sulu.content.contents.save",this.data)}},load:function(){this.sandbox.emit("sulu.content.contents.get-data",function(a){this.render(a)}.bind(this))},render:function(a){this.data=a,this.sandbox.dom.html(this.$el,this.renderTemplate("/admin/content/template/form/external-link",{options:this.options})),this.dfdListenForChange=this.sandbox.data.deferred(),this.createForm(this.initData(a)),this.listenForChange()},initData:function(a){return a},createForm:function(a){this.sandbox.form.create(this.formId).initialized.then(function(){this.sandbox.form.setData(this.formId,a).then(function(){this.sandbox.start(this.$el,{reset:!0}),this.dfdListenForChange.resolve()}.bind(this))}.bind(this))},listenForChange:function(){this.dfdListenForChange.then(function(){this.sandbox.dom.on(this.formId,"keyup change",function(){this.setHeaderBar(!1)}.bind(this),".trigger-save-button"),this.sandbox.on("sulu.content.changed",function(){this.setHeaderBar(!1)}.bind(this))}.bind(this))},setHeaderBar:function(a){this.sandbox.emit("sulu.content.contents.set-header-bar",a)}}});